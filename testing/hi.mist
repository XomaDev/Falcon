func runLengthEncode(text) = {
  if (text.textLen() == 0) {
    ""
  } else {
    local result = ""
    local currentChar = text[1]
    local count = 1

    for (i: 2 .. text.textLen()) {
      if (text[i] == currentChar) {
        count = count + 1
      } else {
        result = result _ count _ currentChar
        currentChar = text[i]
        count = 1
      }
    }

    // Encode the last run
    result = result _ count _ currentChar
    result
  }
}